<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="'/programs'" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Create Program</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="solid" expand="block" color="primary" [disabled]="!form.dirty" (click)="create()">
        <ion-icon name="save-outline"></ion-icon> &nbsp; Create
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="content-wrapper">

    <form [formGroup]="form">

      <div class="field-item">
        <h2>Name <ion-text *ngIf="form.controls.name.touched && form.controls.name.invalid"
            color="danger">(required)</ion-text></h2>
        <ion-input formControlName="name"></ion-input>
      </div>

      <div class="field-item">
        <h2>Description</h2>
        <div id="descriptionEditor"></div>
      </div>

      <div class="field-item">
        <h2>Location</h2>
        <ion-input formControlName="location"></ion-input>
      </div>

      <div class="field-item">
        <h2>Eligibility</h2>
        <div id="eligibilityEditor"></div>
      </div>

      <div class="field-item">
        <h2>Fee</h2>
        <ion-input formControlName="fee"></ion-input>
      </div>

      <div class="field-item">
        <h2>Frequency</h2>
        <div id="frequencyEditor"></div>
      </div>

      <div class="field-item">
        <h2>How To Apply</h2>
        <div id="howToApplyEditor"></div>
      </div>

      <div class="field-item">
        <h2>Select an organization <ion-text
            *ngIf="form.controls.organization.touched && form.controls.organization.invalid" color="danger">(required)
          </ion-text></h2>
        <ion-select placeholder="Select" formControlName="organization">
          <ion-select-option *ngFor="let availableOrganization of availableOrganizations$ | async;"
            [value]="availableOrganization.id">{{ availableOrganization.name }}</ion-select-option>
        </ion-select>
      </div>

      <div class="field-item">
        <h2>Languages</h2>
        <div class="multiple-selection">
          <ion-button (click)="toggleLanguage(language)" fill="outline" [class.selected]="language.selected"
            *ngFor="let language of languages">{{ language.name }}</ion-button>
        </div>
      </div>

      <div class="field-item">
        <h2>Focuses</h2>
        <div class="multiple-selection">
          <ion-button (click)="toggleFocus(focus)" fill="outline" [class.selected]="focus.selected"
            *ngFor="let focus of focuses">{{ focus.name }}</ion-button>
        </div>
      </div>

      <div class="field-item">
        <h2>Population Groups</h2>
        <div class="multiple-selection">
          <ion-button (click)="togglePopulationGroup(populationGroup)" fill="outline"
            [class.selected]="populationGroup.selected" *ngFor="let populationGroup of populationGroups">{{
            populationGroup.name }}</ion-button>
        </div>
      </div>

      <div class="field-item">
        <h2>Staff Name</h2>
        <ion-input formControlName="staff_name"></ion-input>
      </div>

      <div class="field-item">
        <h2>Staff Contact</h2>
        <ion-input formControlName="staff_contact"></ion-input>
      </div>

      <ion-item lines="full">
        <ion-label>Enabled</ion-label>
        <ion-toggle slot="end" formControlName="enabled"></ion-toggle>
      </ion-item>

    </form>

  </div>
</ion-content>