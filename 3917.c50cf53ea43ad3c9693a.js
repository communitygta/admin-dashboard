(self.webpackChunkcommunitygta_admin_panel=self.webpackChunkcommunitygta_admin_panel||[]).push([[3917],{3917:(e,n,t)=>{"use strict";t.r(n),t.d(n,{UserProfilePageModule:()=>P});var o=t(8583),i=t(3679),r=t(3083),s=t(131),a=t(263),p=t(639),u=t(2186),l=t(1352);const c=["oldPassword"],d=["newPassword"],g=[{path:"",component:(()=>{class e{constructor(e,n,t){this.authService=e,this.appService=n,this.inAppMessageService=t}ngOnInit(){this.formatProfile()}formatProfile(){const e=this.authService.userProfile$.getValue();this.userProfile={username:e.user.username,email:e.user.email,firstname:e.user.first_name,lastname:e.user.last_name,role:null,managing:null},this.authService.userRole===a.i4.superAdmin&&(this.userProfile.role="Super User"),this.authService.userRole===a.i4.neighbourhoodAdmin&&(this.userProfile.role="Neighbourhood Administrator",this.userProfile.managing=this.appService.appData.Neighbourhood.find(n=>n.id===e.profile.neighbourhood.id)),this.authService.userRole===a.i4.organizationAdmin&&(this.userProfile.role="Organization Administrator",this.userProfile.managing=this.appService.appData.Organization.find(n=>n.id===e.profile.organization.id))}updatePassword(e,n){this.authService.updatePassword({old_password:e,new_password:n}).subscribe(()=>{this.oldPasswordInput.value=null,this.newPasswordInput.value=null,this.inAppMessageService.simpleAlert(null,"Your password has been updated.")})}}return e.\u0275fac=function(n){return new(n||e)(p.Y36(a.e8),p.Y36(u.z),p.Y36(l.r))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-user-profile"]],viewQuery:function(e,n){if(1&e&&(p.Gf(c,5),p.Gf(d,5)),2&e){let e;p.iGM(e=p.CRH())&&(n.oldPasswordInput=e.first),p.iGM(e=p.CRH())&&(n.newPasswordInput=e.first)}},decls:35,vars:3,consts:[[1,"wrapper"],[1,"content-wrapper"],["lines","none"],["slot","end"],[1,"content-wrapper","update-password",3,"ngSubmit"],["position","floating"],["type","password","required",""],["oldPassword",""],["newPassword",""],["mode","md",2,"margin","20px 20px 10px 0","float","right",3,"click"]],template:function(e,n){if(1&e){const e=p.EpF();p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3,"User Profile"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(4,"ion-content"),p.TgZ(5,"div",0),p.TgZ(6,"div",1),p.TgZ(7,"ion-item",2),p.TgZ(8,"ion-label"),p._uU(9,"User Name"),p.qZA(),p.TgZ(10,"ion-note",3),p._uU(11),p.qZA(),p.qZA(),p.TgZ(12,"ion-item",2),p.TgZ(13,"ion-label"),p._uU(14,"Role"),p.qZA(),p.TgZ(15,"ion-note",3),p._uU(16),p.qZA(),p.qZA(),p.TgZ(17,"ion-item",2),p.TgZ(18,"ion-label"),p._uU(19,"Managing"),p.qZA(),p.TgZ(20,"ion-note",3),p._uU(21),p.qZA(),p.qZA(),p.qZA(),p.TgZ(22,"form",4),p.NdJ("ngSubmit",function(){p.CHM(e);const t=p.MAs(27),o=p.MAs(32);return n.updatePassword(t.value,o.value)}),p.TgZ(23,"ion-item"),p.TgZ(24,"ion-label",5),p._uU(25,"Old Password"),p.qZA(),p._UZ(26,"ion-input",6,7),p.qZA(),p.TgZ(28,"ion-item"),p.TgZ(29,"ion-label",5),p._uU(30,"New Password"),p.qZA(),p._UZ(31,"ion-input",6,8),p.qZA(),p.TgZ(33,"ion-button",9),p.NdJ("click",function(){p.CHM(e);const t=p.MAs(27),o=p.MAs(32);return n.updatePassword(t.value,o.value)}),p._uU(34,"Update password"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(11),p.Oqu(n.userProfile.username),p.xp6(5),p.Oqu(n.userProfile.role),p.xp6(5),p.Oqu(n.userProfile.managing.name))},directives:[r.Gu,r.sr,r.wd,r.W2,r.Ie,r.Q$,r.uN,i._Y,i.JL,i.F,r.pK,r.j9,r.YG],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:self-start;flex-wrap:wrap}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:30px;border-radius:15px;box-shadow:0 3px 10px #0003;overflow:hidden;padding:10px 0;position:relative;max-width:350px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:#444}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:13px;color:#707070}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.update-password[_ngcontent-%COMP%]{width:300px}"]}),e})()}];let m=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,i.u5,i.UX,r.Pc,m]]}),e})()}}]);