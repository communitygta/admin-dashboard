(self.webpackChunkcommunitygta_admin_panel=self.webpackChunkcommunitygta_admin_panel||[]).push([[2493],{2493:(n,t,e)=>{"use strict";e.r(t),e.d(t,{ProgramsPageModule:()=>P});var o=e(8583),i=e(3679),r=e(3083),a=e(131),g=e(263),c=e(639),s=e(5315),l=e(2186);function p(n,t){1&n&&(c.ynx(0),c._uU(1,"s"),c.BQk())}function u(n,t){if(1&n&&(c.TgZ(0,"ion-select-option",18),c._uU(1),c.qZA()),2&n){const n=t.$implicit;c.Q6J("value",n.id),c.xp6(1),c.Oqu(n.name)}}function h(n,t){if(1&n){const n=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"ion-item",13),c.TgZ(2,"ion-label",14),c._uU(3,"Select an organization"),c.qZA(),c.TgZ(4,"ion-select",15),c.NdJ("ionChange",function(t){return c.CHM(n),c.oxw(2).onSelect(t)})("ngModelChange",function(t){return c.CHM(n),c.oxw(2).selectedOrganization=t}),c.TgZ(5,"ion-select-option",16),c._uU(6,"None"),c.qZA(),c.YNc(7,u,2,2,"ion-select-option",17),c.qZA(),c.qZA(),c.qZA()}if(2&n){const n=c.oxw(2);c.xp6(4),c.Q6J("ngModel",n.selectedOrganization),c.xp6(3),c.Q6J("ngForOf",n.availableOrganizations)}}function d(n,t){if(1&n&&(c.ynx(0),c.TgZ(1,"ion-note",24),c._uU(2),c.qZA(),c.BQk()),2&n){const n=c.oxw().$implicit;c.xp6(2),c.Oqu(n.organization.name)}}function m(n,t){1&n&&(c.TgZ(0,"ion-note",3),c._UZ(1,"ion-icon",25),c._uU(2," Enabled "),c.qZA())}function f(n,t){1&n&&(c.TgZ(0,"ion-note",3),c._UZ(1,"ion-icon",26),c._uU(2," Disabled "),c.qZA())}const O=function(n){return["/programs",n]};function Z(n,t){if(1&n&&(c.TgZ(0,"ion-item",19),c.TgZ(1,"ion-label",20),c._uU(2),c.YNc(3,d,3,1,"ng-container",0),c.qZA(),c.TgZ(4,"ion-label",21),c.YNc(5,m,3,0,"ion-note",22),c.YNc(6,f,3,0,"ion-note",22),c.TgZ(7,"ion-note",3),c._UZ(8,"ion-icon",23),c._uU(9),c.qZA(),c.qZA(),c.qZA()),2&n){const n=t.$implicit,e=c.oxw(2);c.Q6J("routerLink",c.VKq(6,O,n.id)),c.xp6(2),c.hij("",n.name," "),c.xp6(1),c.Q6J("ngIf",(0===e.userRole||1===e.userRole)&&n.organization),c.xp6(2),c.Q6J("ngIf",n.enabled),c.xp6(1),c.Q6J("ngIf",!n.enabled),c.xp6(3),c.hij(" ",n.view_count," Views ")}}function C(n,t){1&n&&(c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c._uU(2,"No results"),c.qZA(),c.qZA())}const _=function(){return["/program-create"]};function w(n,t){if(1&n){const n=c.EpF();c.ynx(0),c.TgZ(1,"ion-header"),c.TgZ(2,"ion-toolbar",1),c.TgZ(3,"ion-buttons",2),c._UZ(4,"ion-menu-button"),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.YNc(7,p,2,0,"ng-container",0),c.qZA(),c.TgZ(8,"ion-buttons",3),c.TgZ(9,"ion-button",4),c._UZ(10,"ion-icon",5),c._uU(11," \xa0 Create "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"ion-content"),c.TgZ(13,"div",6),c.TgZ(14,"div",7),c.TgZ(15,"ion-item"),c.TgZ(16,"ion-input",8),c.NdJ("ionChange",function(t){return c.CHM(n),c.oxw().onFilter(t)})("ngModelChange",function(t){return c.CHM(n),c.oxw().filterInput=t}),c.qZA(),c.qZA(),c.qZA(),c.YNc(17,h,8,2,"div",9),c.TgZ(18,"div",10),c.YNc(19,Z,10,8,"ion-item",11),c.YNc(20,C,3,0,"ion-item",0),c.qZA(),c.qZA(),c.qZA(),c.BQk()}if(2&n){const n=c.oxw();c.xp6(6),c.hij("",null==n.programs?null:n.programs.length," Program"),c.xp6(1),c.Q6J("ngIf",(null==n.programs?null:n.programs.length)>1),c.xp6(2),c.Q6J("routerLink",c.DdM(7,_)),c.xp6(7),c.Q6J("ngModel",n.filterInput),c.xp6(1),c.Q6J("ngIf",n.availableOrganizations),c.xp6(2),c.Q6J("ngForOf",n.programs),c.xp6(1),c.Q6J("ngIf",!n.programs.length)}}const x=[{path:"",component:(()=>{class n{constructor(n,t,e){this.authService=n,this.dashboardService=t,this.appService=e}ngOnInit(){}getOrganizationSelections(n){this.availableOrganizations=this.appService.appData.Organization.filter(t=>t.neighbourhood===+n)}onFilter(n){const t=n.target.value;this.programs=this.oriPrograms.filter(n=>{var e;return+this.selectedOrganization?-1!==n.name.toLowerCase().indexOf(t.trim().toLowerCase())&&(null===(e=n.organization)||void 0===e?void 0:e.id)===+this.selectedOrganization:-1!==n.name.toLowerCase().indexOf(t.trim().toLowerCase())})}onSelect(n){const t=n.target.value;this.programs=this.oriPrograms.filter(n=>{var e,o;return this.filterInput&&this.filterInput.trim()?-1!==n.name.toLowerCase().indexOf(this.filterInput.trim().toLowerCase())&&((null===(e=n.organization)||void 0===e?void 0:e.id)===+t||!+t):(null===(o=n.organization)||void 0===o?void 0:o.id)===+t||!+t})}ionViewWillEnter(){if(this.userRole=this.authService.userRole,this.authService.userRole===g.i4.superAdmin&&this.dashboardService.getAllPrograms().subscribe(n=>{this.programs=n,this.oriPrograms=n}),this.authService.userRole===g.i4.organizationAdmin&&this.dashboardService.getProgramsByOrganization(this.authService.userProfile$.getValue().profile.organization.id).subscribe(n=>{this.programs=n,this.oriPrograms=n}),this.authService.userRole===g.i4.neighbourhoodAdmin){const n=this.authService.userProfile$.getValue().profile.neighbourhood.id;this.getOrganizationSelections(n),this.dashboardService.getProgramsByNeighbourhood(n).subscribe(n=>{this.programs=n,this.oriPrograms=n})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(g.e8),c.Y36(s.s),c.Y36(l.z))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-programs"]],decls:1,vars:1,consts:[[4,"ngIf"],["color","light"],["slot","start"],["slot","end"],["fill","solid","expand","block","color","primary",3,"routerLink"],["name","add-outline"],[1,"wrapper"],[1,"content-wrapper","filter"],["clearInput","","placeholder","filter by program name",3,"ngModel","ionChange","ngModelChange"],["class","content-wrapper selection",4,"ngIf"],[1,"content-wrapper"],["button","","lines","full",3,"routerLink",4,"ngFor","ngForOf"],[1,"content-wrapper","selection"],[2,"--padding-start","0"],[2,"display","none"],["placeholder","filter by organization",3,"ngModel","ionChange","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["button","","lines","full",3,"routerLink"],[1,"ion-text-wrap"],["slot","end",1,"ion-text-wrap","ion-text-right"],["slot","end",4,"ngIf"],["size","large","name","eye","color","primary"],[1,"organization-name"],["size","large","name","checkmark-circle","color","success"],["size","large","name","remove-circle","color","warning"]],template:function(n,t){1&n&&c.YNc(0,w,21,8,"ng-container",0),2&n&&c.Q6J("ngIf",t.programs)},directives:[o.O5,r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.YI,a.rH,r.gu,r.W2,r.Ie,r.pK,r.j9,i.JJ,i.On,o.sg,r.Q$,r.t9,r.QI,r.n0,r.uN],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:20px 30px;border-radius:15px;box-shadow:0 3px 10px #0003;overflow:hidden;padding:10px 0;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.filter[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.selection[_ngcontent-%COMP%]{max-width:350px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{max-width:100%;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note.organization-name[_ngcontent-%COMP%]{font-size:13px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;width:24px;height:24px}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[o.ez,i.u5,r.Pc,M]]}),n})()}}]);