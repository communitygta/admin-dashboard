(self.webpackChunkcommunitygta_admin_panel=self.webpackChunkcommunitygta_admin_panel||[]).push([[3917],{3917:(n,e,o)=>{"use strict";o.r(e),o.d(e,{UserProfilePageModule:()=>Z});var t=o(8583),r=o(3679),i=o(3083),s=o(131),a=o(263),c=o(639),p=o(2186),l=o(1352);function u(n,e){if(1&n&&(c.TgZ(0,"ion-item",3),c.TgZ(1,"ion-label"),c._uU(2,"Managing"),c.qZA(),c.TgZ(3,"ion-note",4),c._uU(4),c.qZA(),c.qZA()),2&n){const n=c.oxw();c.xp6(4),c.Oqu(n.userProfile.managing.name)}}function g(n,e){1&n&&c._UZ(0,"ion-icon",16)}function d(n,e){1&n&&c._UZ(0,"ion-icon",17)}function m(n,e){1&n&&c._UZ(0,"ion-icon",16)}function f(n,e){1&n&&c._UZ(0,"ion-icon",17)}const w=[{path:"",component:(()=>{class n{constructor(n,e,o,t){this.authService=n,this.appService=e,this.inAppMessageService=o,this.fb=t}ngOnInit(){this.formatProfile(),this.initForm()}get old_password(){return this.form.controls.old_password}get new_password(){return this.form.controls.new_password}initForm(){this.form=this.fb.group({old_password:[null,[r.kI.required,r.kI.minLength(8),r.kI.maxLength(16),r.kI.pattern(/^(?=.*[\d])(?=.*[a-zA-Z])[\w]{8,16}$/)]],new_password:[null,[r.kI.required,r.kI.minLength(8),r.kI.maxLength(16),r.kI.pattern(/^(?=.*[\d])(?=.*[a-zA-Z])[\w]{8,16}$/)]]})}formatProfile(){const n=this.authService.userProfile$.getValue();this.userProfile={username:n.user.username,email:n.user.email,firstname:n.user.first_name,lastname:n.user.last_name,role:null,managing:null},this.authService.userRole===a.i4.superAdmin&&(this.userProfile.role="Super User"),this.authService.userRole===a.i4.neighbourhoodAdmin&&(this.userProfile.role="Neighbourhood Administrator",this.userProfile.managing=this.appService.appData.Neighbourhood.find(e=>e.id===n.profile.neighbourhood.id)),this.authService.userRole===a.i4.organizationAdmin&&(this.userProfile.role="Organization Administrator",this.userProfile.managing=this.appService.appData.Organization.find(e=>e.id===n.profile.organization.id))}updatePassword(){this.form.invalid||this.authService.updatePassword(this.form.value).subscribe(()=>{this.form.reset(),this.inAppMessageService.simpleAlert(null,"Your password has been updated.")})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(a.e8),c.Y36(p.z),c.Y36(l.r),c.Y36(r.qu))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-user-profile"]],decls:54,vars:9,consts:[["slot","start"],[1,"wrapper"],[1,"content-wrapper"],["lines","none"],["slot","end"],["lines","none",4,"ngIf"],[1,"content-wrapper","update-password",3,"formGroup","ngSubmit"],["lines","full"],["name","checkmark-circle","color","success",4,"ngIf"],["name","alert-circle","color","warning",4,"ngIf"],["formControlName","old_password","type","password","required","","readonly","","autocorrect","off","spellcheck","false","autocomplete","off",3,"ionFocus"],["oldPassword",""],["formControlName","new_password","type","password","required","","readonly","","autocorrect","off","spellcheck","false","autocomplete","off",3,"ionFocus"],["newPassword",""],["type","submit","mode","md","size","small",2,"margin","10px 16px 10px 0","float","right",3,"click"],[1,"content-wrapper","password-rules"],["name","checkmark-circle","color","success"],["name","alert-circle","color","warning"]],template:function(n,e){if(1&n){const n=c.EpF();c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-menu-button"),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"My Profile"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"div",1),c.TgZ(8,"div",2),c.TgZ(9,"ion-item",3),c.TgZ(10,"ion-label"),c._uU(11,"User Name"),c.qZA(),c.TgZ(12,"ion-note",4),c._uU(13),c.qZA(),c.qZA(),c.TgZ(14,"ion-item",3),c.TgZ(15,"ion-label"),c._uU(16,"Role"),c.qZA(),c.TgZ(17,"ion-note",4),c._uU(18),c.qZA(),c.qZA(),c.YNc(19,u,5,1,"ion-item",5),c.TgZ(20,"ion-item",3),c.TgZ(21,"ion-label"),c._uU(22,"Email"),c.qZA(),c.TgZ(23,"ion-note",4),c._uU(24),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"form",6),c.NdJ("ngSubmit",function(){return e.updatePassword()}),c.TgZ(26,"ion-item",7),c.TgZ(27,"ion-label"),c._uU(28,"Old Password "),c.YNc(29,g,1,0,"ion-icon",8),c.YNc(30,d,1,0,"ion-icon",9),c.qZA(),c.TgZ(31,"ion-input",10,11),c.NdJ("ionFocus",function(){return c.CHM(n),c.MAs(32).readonly=!1}),c.qZA(),c.qZA(),c.TgZ(33,"ion-item",7),c.TgZ(34,"ion-label"),c._uU(35,"New Password "),c.YNc(36,m,1,0,"ion-icon",8),c.YNc(37,f,1,0,"ion-icon",9),c.qZA(),c.TgZ(38,"ion-input",12,13),c.NdJ("ionFocus",function(){return c.CHM(n),c.MAs(39).readonly=!1}),c.qZA(),c.qZA(),c.TgZ(40,"ion-button",14),c.NdJ("click",function(){return e.updatePassword()}),c._uU(41,"Update password"),c.qZA(),c.qZA(),c.TgZ(42,"div",15),c.TgZ(43,"p"),c._uU(44,"Password rules:"),c.qZA(),c.TgZ(45,"ul"),c.TgZ(46,"li"),c._uU(47,"Password must contain 8 to 16 characters"),c.qZA(),c.TgZ(48,"li"),c._uU(49,"Password must contain at least one number and one letter"),c.qZA(),c.TgZ(50,"li"),c._uU(51,"Password must not contain a special character"),c.qZA(),c.TgZ(52,"li"),c._uU(53,"Password must not be a commonly used password"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&n&&(c.xp6(13),c.Oqu(e.userProfile.username),c.xp6(5),c.Oqu(e.userProfile.role),c.xp6(1),c.Q6J("ngIf",e.userProfile.managing),c.xp6(5),c.Oqu(e.userProfile.email||"N/A"),c.xp6(1),c.Q6J("formGroup",e.form),c.xp6(4),c.Q6J("ngIf",e.old_password.dirty&&e.old_password.valid),c.xp6(1),c.Q6J("ngIf",e.old_password.dirty&&e.old_password.invalid),c.xp6(6),c.Q6J("ngIf",e.new_password.dirty&&e.new_password.valid),c.xp6(1),c.Q6J("ngIf",e.new_password.dirty&&e.new_password.invalid))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.W2,i.Ie,i.Q$,i.uN,t.O5,r._Y,r.JL,r.sg,i.pK,i.j9,r.JJ,r.u,r.Q7,i.YG,i.gu],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:self-start;flex-wrap:wrap}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:30px;border-radius:15px;box-shadow:0 3px 10px #0003;overflow:hidden;padding:10px 0;position:relative;width:100%;max-width:380px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.password-rules[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.password-rules[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#444}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.password-rules[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:13px;padding-left:20px;color:#707070}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:#444}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:13px;color:#707070}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:right}"]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[s.Bz.forChild(w)],s.Bz]}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[t.ez,r.u5,r.UX,i.Pc,_]]}),n})()}}]);