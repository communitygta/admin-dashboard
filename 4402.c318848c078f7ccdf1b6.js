(self.webpackChunkcommunitygta_admin_panel=self.webpackChunkcommunitygta_admin_panel||[]).push([[4402],{5360:(n,e,o)=>{"use strict";o.r(e),o.d(e,{UserListPageModule:()=>M});var i=o(8583),t=o(3679),r=o(3083),a=o(1182),l=o(263),s=o(639),c=o(5332);function g(n,e){if(1&n&&(s.TgZ(0,"ion-select-option",16),s._uU(1),s.qZA()),2&n){const n=e.$implicit;s.Q6J("value",n.id),s.xp6(1),s.Oqu(n.name)}}function u(n,e){if(1&n){const n=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"ion-item"),s.TgZ(2,"ion-label",6),s._uU(3,"Organization filter"),s.qZA(),s.TgZ(4,"ion-select",13),s.NdJ("ionChange",function(e){return s.CHM(n),s.oxw().onOrganizationSelect(e)})("ngModelChange",function(e){return s.CHM(n),s.oxw().selectedOrganizationId=e}),s.TgZ(5,"ion-select-option",14),s._uU(6,"None"),s.qZA(),s.YNc(7,g,2,2,"ion-select-option",15),s.ALo(8,"async"),s.qZA(),s.qZA(),s.qZA()}if(2&n){const n=s.oxw();s.xp6(4),s.Q6J("ngModel",n.selectedOrganizationId),s.xp6(3),s.Q6J("ngForOf",s.lcZ(8,2,n.availableOrganizations$))}}function d(n,e){if(1&n&&(s.TgZ(0,"ion-select-option",16),s._uU(1),s.qZA()),2&n){const n=e.$implicit;s.Q6J("value",n.id),s.xp6(1),s.Oqu(n.name)}}function p(n,e){if(1&n){const n=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"ion-item"),s.TgZ(2,"ion-label",6),s._uU(3,"Neighbourhood filter"),s.qZA(),s.TgZ(4,"ion-select",17),s.NdJ("ionChange",function(e){return s.CHM(n),s.oxw().onNeighbourhoodSelect(e)})("ngModelChange",function(e){return s.CHM(n),s.oxw().selectedNeighbourhoodId=e}),s.TgZ(5,"ion-select-option",14),s._uU(6,"None"),s.qZA(),s.YNc(7,d,2,2,"ion-select-option",15),s.ALo(8,"async"),s.qZA(),s.qZA(),s.qZA()}if(2&n){const n=s.oxw();s.xp6(4),s.Q6J("ngModel",n.selectedNeighbourhoodId),s.xp6(3),s.Q6J("ngForOf",s.lcZ(8,2,n.availableNeighbourhoods$))}}function h(n,e){1&n&&(s.TgZ(0,"ion-chip"),s._uU(1," inactive "),s.qZA())}function f(n,e){if(1&n&&(s.ynx(0),s._uU(1," Neighbourhood Admin "),s._UZ(2,"br"),s.TgZ(3,"ion-badge"),s._uU(4),s.qZA(),s.BQk()),2&n){const n=s.oxw().$implicit;s.xp6(4),s.Oqu(n.neighbourhood.name)}}function Z(n,e){if(1&n&&(s.ynx(0),s._uU(1," Organization Admin "),s._UZ(2,"br"),s.TgZ(3,"ion-badge"),s._uU(4),s.qZA(),s.BQk()),2&n){const n=s.oxw().$implicit;s.xp6(4),s.Oqu(n.organization.name)}}const b=function(n){return["/user-edit",n]};function O(n,e){if(1&n&&(s.TgZ(0,"ion-item",18),s.TgZ(1,"ion-label",19),s._uU(2),s.YNc(3,h,2,0,"ion-chip",11),s._UZ(4,"br"),s.TgZ(5,"ion-note"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ion-label",20),s.YNc(8,f,5,1,"ng-container",11),s.YNc(9,Z,5,1,"ng-container",11),s.qZA(),s.qZA()),2&n){const n=e.$implicit;s.Q6J("routerLink",s.VKq(6,b,n.id)),s.xp6(2),s.hij(" ",n.user.username," "),s.xp6(1),s.Q6J("ngIf",!n.user.is_active),s.xp6(3),s.Oqu(n.user.email||"N/A"),s.xp6(2),s.Q6J("ngIf",n.neighbourhood),s.xp6(1),s.Q6J("ngIf",n.organization)}}function _(n,e){1&n&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s._uU(2,"No results"),s.qZA(),s.qZA())}const C=function(){return["/user-create"]},v=[{path:"",component:(()=>{class n{constructor(n,e){this.authService=n,this.dashboardService=e}ngOnInit(){}ionViewWillEnter(){if(this.authService.userRole===l.i4.superAdmin&&(this.availableOrganizations$=this.dashboardService.getAllOrganizations(),this.availableNeighbourhoods$=this.dashboardService.getAllNeighbourhoods(),this.authService.getAllUsersBySuperUser().subscribe(n=>{this.oriProfiles=n,this.profiles=n})),this.authService.userRole===l.i4.neighbourhoodAdmin){const n=this.authService.userProfile$.getValue().profile.neighbourhood.id;this.availableOrganizations$=this.dashboardService.getOrganizationsByNeighbourhoodId(n),this.authService.getUsersByNeighbourhood().subscribe(n=>{this.oriProfiles=n,this.profiles=n})}}onFilter(n){const e=n.target.value;this.profiles=this.oriProfiles.filter(n=>{var o,i;let t=!0,r=!0,a=!0;return t=-1!==n.user.username.toLowerCase().indexOf(e.toLowerCase()),+this.selectedOrganizationId&&(r=(null===(o=n.organization)||void 0===o?void 0:o.id)===this.selectedOrganizationId),+this.selectedNeighbourhoodId&&(a=(null===(i=n.neighbourhood)||void 0===i?void 0:i.id)===this.selectedNeighbourhoodId),t&&r&&a})}onOrganizationSelect(n){const e=+n.target.value;this.profiles=this.oriProfiles.filter(n=>{var o,i;let t=!0,r=!0,a=!0;return this.filterInput&&(t=-1!==n.user.username.toLowerCase().indexOf(this.filterInput.trim().toLowerCase())),e&&(r=(null===(o=n.organization)||void 0===o?void 0:o.id)===e),+this.selectedNeighbourhoodId&&(a=(null===(i=n.neighbourhood)||void 0===i?void 0:i.id)===this.selectedNeighbourhoodId),t&&r&&a})}onNeighbourhoodSelect(n){const e=+n.target.value;this.profiles=this.oriProfiles.filter(n=>{var o,i;let t=!0,r=!0,a=!0;return this.filterInput&&(t=-1!==n.user.username.toLowerCase().indexOf(this.filterInput.trim().toLowerCase())),e&&(a=(null===(o=n.neighbourhood)||void 0===o?void 0:o.id)===e),+this.selectedOrganizationId&&(r=(null===(i=n.organization)||void 0===i?void 0:i.id)===this.selectedOrganizationId),t&&r&&a})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(l.e8),s.Y36(c.s))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-user-list"]],decls:22,vars:7,consts:[["slot","start"],["slot","end"],["fill","solid","expand","block","color","primary",3,"routerLink"],["name","add-outline"],[1,"wrapper"],[1,"content-wrapper","filter"],["position","stacked"],["clearInput","","placeholder","filter by program name",3,"ngModel","ionChange","ngModelChange"],["class","content-wrapper selection",4,"ngIf"],[1,"content-wrapper"],["lines","full",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"content-wrapper","selection"],["placeholder","filter by organization",3,"ngModel","ionChange","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","filter by neighbourhood",3,"ngModel","ionChange","ngModelChange"],["lines","full",3,"routerLink"],[1,"ion-text-wrap"],["slot","end",1,"ion-text-wrap","ion-text-right"]],template:function(n,e){1&n&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s._UZ(3,"ion-menu-button"),s.qZA(),s.TgZ(4,"ion-title"),s._uU(5,"Admin List"),s.qZA(),s.TgZ(6,"ion-buttons",1),s.TgZ(7,"ion-button",2),s._UZ(8,"ion-icon",3),s._uU(9," \xa0 Create "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"ion-content"),s.TgZ(11,"div",4),s.TgZ(12,"div",5),s.TgZ(13,"ion-item"),s.TgZ(14,"ion-label",6),s._uU(15,"User name filter"),s.qZA(),s.TgZ(16,"ion-input",7),s.NdJ("ionChange",function(n){return e.onFilter(n)})("ngModelChange",function(n){return e.filterInput=n}),s.qZA(),s.qZA(),s.qZA(),s.YNc(17,u,9,4,"div",8),s.YNc(18,p,9,4,"div",8),s.TgZ(19,"div",9),s.YNc(20,O,10,8,"ion-item",10),s.YNc(21,_,3,0,"ion-item",11),s.qZA(),s.qZA(),s.qZA()),2&n&&(s.xp6(7),s.Q6J("routerLink",s.DdM(6,C)),s.xp6(9),s.Q6J("ngModel",e.filterInput),s.xp6(1),s.Q6J("ngIf",e.availableOrganizations$),s.xp6(1),s.Q6J("ngIf",e.availableNeighbourhoods$),s.xp6(2),s.Q6J("ngForOf",e.profiles),s.xp6(1),s.Q6J("ngIf",!e.profiles||0===e.profiles.length))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.YI,a.rH,r.gu,r.W2,r.Ie,r.Q$,r.pK,r.j9,t.JJ,t.On,i.O5,i.sg,r.t9,r.QI,r.n0,r.uN,r.hM,r.yp],pipes:[i.Ov],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:30px;border-radius:15px;box-shadow:0 3px 10px #0003;overflow:hidden;padding:10px 0;position:relative;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.filter[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.selection[_ngcontent-%COMP%]{max-width:350px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{max-width:100%;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#444;font-size:15px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{position:absolute;top:4px;background-color:var(--ion-color-warning);--color:#fff}"]}),n})()}];let m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[a.Bz.forChild(v)],a.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[i.ez,t.u5,r.Pc,m]]}),n})()}}]);