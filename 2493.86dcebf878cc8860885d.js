(self.webpackChunkcommunitygta_admin_panel=self.webpackChunkcommunitygta_admin_panel||[]).push([[2493],{2493:(n,e,t)=>{"use strict";t.r(e),t.d(e,{ProgramsPageModule:()=>P});var o=t(8583),i=t(3679),r=t(3083),a=t(1182),s=t(263),g=t(639),c=t(5332),l=t(4382);function p(n,e){1&n&&(g.ynx(0),g._uU(1,"s"),g.BQk())}function u(n,e){if(1&n&&(g.TgZ(0,"ion-select-option",18),g._uU(1),g.qZA()),2&n){const n=e.$implicit;g.Q6J("value",n.id),g.xp6(1),g.Oqu(n.name)}}function h(n,e){if(1&n){const n=g.EpF();g.TgZ(0,"div",12),g.TgZ(1,"ion-item",13),g.TgZ(2,"ion-label",14),g._uU(3,"Select an organization"),g.qZA(),g.TgZ(4,"ion-select",15),g.NdJ("ionChange",function(e){return g.CHM(n),g.oxw(2).onSelect(e)})("ngModelChange",function(e){return g.CHM(n),g.oxw(2).selectedOrganization=e}),g.TgZ(5,"ion-select-option",16),g._uU(6,"None"),g.qZA(),g.YNc(7,u,2,2,"ion-select-option",17),g.ALo(8,"async"),g.qZA(),g.qZA(),g.qZA()}if(2&n){const n=g.oxw(2);g.xp6(4),g.Q6J("ngModel",n.selectedOrganization),g.xp6(3),g.Q6J("ngForOf",g.lcZ(8,2,n.availableOrganizations$))}}function d(n,e){if(1&n&&(g.ynx(0),g.TgZ(1,"ion-note",24),g._uU(2),g.qZA(),g.BQk()),2&n){const n=g.oxw().$implicit;g.xp6(2),g.Oqu(n.organization.name)}}function m(n,e){1&n&&(g.TgZ(0,"ion-note",3),g._UZ(1,"ion-icon",25),g._uU(2," Enabled "),g.qZA())}function f(n,e){1&n&&(g.TgZ(0,"ion-note",3),g._UZ(1,"ion-icon",26),g._uU(2," Disabled "),g.qZA())}const O=function(n){return["/programs",n]};function Z(n,e){if(1&n&&(g.TgZ(0,"ion-item",19),g.TgZ(1,"ion-label",20),g._uU(2),g.YNc(3,d,3,1,"ng-container",0),g.qZA(),g.TgZ(4,"ion-label",21),g.YNc(5,m,3,0,"ion-note",22),g.YNc(6,f,3,0,"ion-note",22),g.TgZ(7,"ion-note",3),g._UZ(8,"ion-icon",23),g._uU(9),g.qZA(),g.qZA(),g.qZA()),2&n){const n=e.$implicit,t=g.oxw(2);g.Q6J("routerLink",g.VKq(6,O,n.id)),g.xp6(2),g.hij("",n.name," "),g.xp6(1),g.Q6J("ngIf",(0===t.userRole||1===t.userRole)&&n.organization),g.xp6(2),g.Q6J("ngIf",n.enabled),g.xp6(1),g.Q6J("ngIf",!n.enabled),g.xp6(3),g.hij(" ",n.view_count," Views ")}}function C(n,e){1&n&&(g.TgZ(0,"ion-item"),g.TgZ(1,"ion-label"),g._uU(2,"No results"),g.qZA(),g.qZA())}const _=function(){return["/program-create"]};function w(n,e){if(1&n){const n=g.EpF();g.ynx(0),g.TgZ(1,"ion-header"),g.TgZ(2,"ion-toolbar",1),g.TgZ(3,"ion-buttons",2),g._UZ(4,"ion-menu-button"),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.YNc(7,p,2,0,"ng-container",0),g.qZA(),g.TgZ(8,"ion-buttons",3),g.TgZ(9,"ion-button",4),g._UZ(10,"ion-icon",5),g._uU(11," \xa0 Create "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-content"),g.TgZ(13,"div",6),g.TgZ(14,"div",7),g.TgZ(15,"ion-item"),g.TgZ(16,"ion-input",8),g.NdJ("ionChange",function(e){return g.CHM(n),g.oxw().onFilter(e)})("ngModelChange",function(e){return g.CHM(n),g.oxw().filterInput=e}),g.qZA(),g.qZA(),g.qZA(),g.YNc(17,h,9,4,"div",9),g.TgZ(18,"div",10),g.YNc(19,Z,10,8,"ion-item",11),g.YNc(20,C,3,0,"ion-item",0),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&n){const n=g.oxw();g.xp6(6),g.hij("",null==n.programs?null:n.programs.length," Program"),g.xp6(1),g.Q6J("ngIf",(null==n.programs?null:n.programs.length)>1),g.xp6(2),g.Q6J("routerLink",g.DdM(7,_)),g.xp6(7),g.Q6J("ngModel",n.filterInput),g.xp6(1),g.Q6J("ngIf",n.availableOrganizations$),g.xp6(2),g.Q6J("ngForOf",n.programs),g.xp6(1),g.Q6J("ngIf",!n.programs.length)}}const x=[{path:"",component:(()=>{class n{constructor(n,e,t){this.authService=n,this.dashboardService=e,this.appService=t}ngOnInit(){}getOrganizationSelections(n){this.authService.userRole===s.i4.superAdmin&&(this.availableOrganizations$=this.dashboardService.getAllOrganizations()),this.authService.userRole===s.i4.neighbourhoodAdmin&&(this.availableOrganizations$=this.dashboardService.getOrganizationsByNeighbourhoodId(n))}onFilter(n){const e=n.target.value;this.programs=this.oriPrograms.filter(n=>{var t;return+this.selectedOrganization?-1!==n.name.toLowerCase().indexOf(e.trim().toLowerCase())&&(null===(t=n.organization)||void 0===t?void 0:t.id)===+this.selectedOrganization:-1!==n.name.toLowerCase().indexOf(e.trim().toLowerCase())})}onSelect(n){const e=n.target.value;this.programs=this.oriPrograms.filter(n=>{var t,o;return this.filterInput&&this.filterInput.trim()?-1!==n.name.toLowerCase().indexOf(this.filterInput.trim().toLowerCase())&&((null===(t=n.organization)||void 0===t?void 0:t.id)===+e||!+e):(null===(o=n.organization)||void 0===o?void 0:o.id)===+e||!+e})}ionViewWillEnter(){if(this.userRole=this.authService.userRole,this.authService.userRole===s.i4.superAdmin&&(this.getOrganizationSelections(),this.dashboardService.getAllPrograms().subscribe(n=>{this.programs=n,this.oriPrograms=n})),this.authService.userRole===s.i4.organizationAdmin&&this.dashboardService.getProgramsByOrganization(this.authService.userProfile$.getValue().profile.organization.id).subscribe(n=>{this.programs=n,this.oriPrograms=n}),this.authService.userRole===s.i4.neighbourhoodAdmin){const n=this.authService.userProfile$.getValue().profile.neighbourhood.id;this.getOrganizationSelections(n),this.dashboardService.getProgramsByNeighbourhood(n).subscribe(n=>{this.programs=n,this.oriPrograms=n})}}}return n.\u0275fac=function(e){return new(e||n)(g.Y36(s.e8),g.Y36(c.s),g.Y36(l.z))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-programs"]],decls:1,vars:1,consts:[[4,"ngIf"],["color","light"],["slot","start"],["slot","end"],["fill","solid","expand","block","color","primary",3,"routerLink"],["name","add-outline"],[1,"wrapper"],[1,"content-wrapper","filter"],["clearInput","","placeholder","filter by program name",3,"ngModel","ionChange","ngModelChange"],["class","content-wrapper selection",4,"ngIf"],[1,"content-wrapper"],["button","","lines","full",3,"routerLink",4,"ngFor","ngForOf"],[1,"content-wrapper","selection"],[2,"--padding-start","0"],[2,"display","none"],["placeholder","filter by organization",3,"ngModel","ionChange","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["button","","lines","full",3,"routerLink"],[1,"ion-text-wrap"],["slot","end",1,"ion-text-wrap","ion-text-right"],["slot","end",4,"ngIf"],["size","large","name","eye","color","primary"],[1,"organization-name"],["size","large","name","checkmark-circle","color","success"],["size","large","name","remove-circle","color","warning"]],template:function(n,e){1&n&&g.YNc(0,w,21,8,"ng-container",0),2&n&&g.Q6J("ngIf",e.programs)},directives:[o.O5,r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.YI,a.rH,r.gu,r.W2,r.Ie,r.pK,r.j9,i.JJ,i.On,o.sg,r.Q$,r.t9,r.QI,r.n0,r.uN],pipes:[o.Ov],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:20px 30px;border-radius:15px;box-shadow:0 3px 10px #0003;overflow:hidden;padding:10px 0;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.filter[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper.selection[_ngcontent-%COMP%]{max-width:350px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{max-width:100%;width:100%}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note.organization-name[_ngcontent-%COMP%]{font-size:13px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;width:24px;height:24px}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[o.ez,i.u5,r.Pc,M]]}),n})()}}]);